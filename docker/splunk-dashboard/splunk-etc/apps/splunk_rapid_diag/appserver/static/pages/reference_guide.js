!function(e){function t(t){for(var a,s,i=t[0],l=t[1],c=t[2],p=0,d=[];p<i.length;p++)s=i[p],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(u&&u(t);d.length;)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,i=1;i<n.length;i++){var l=n[i];0!==o[l]&&(a=!1)}a&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},o={1:0},r=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;r.push([1017,0]),n()}({1017:function(e,t,n){"use strict";n.r(t);var a,o,r=n(1),s=n.n(r),i=n(57),l=n.n(i),c=n(12),u=n(58),p=n(497),d=n.n(p),m=n(4);function f(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var h=m.default.div(a||(a=f(["\n    ",";\n    display: block;\n    font-size: ",";\n    line-height: 200%;\n    margin: calc("," * 2) calc("," * 2);\n"])),c.mixins.reset("inline"),c.variables.fontSizeLarge,c.variables.spacing,c.variables.spacing),b=(m.default.div(o||(o=f(["\n    font-weight: bold;\n    color: ",";\n    font-size: ",";\n"])),c.variables.infoColor,c.variables.fontSizeXXLarge),"/builds/customer-managed-platform/rapid-diag/splunk_rapid_diag/appserver/src/packages/splunk-rapid-diag/src/main/webapp/pages/reference-guide/index.jsx");function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var y={enterprise:{family:"enterprise",colorScheme:"light",density:"comfortable"},enterpriseDark:{family:"enterprise",colorScheme:"dark",density:"comfortable"},lite:{family:"enterprise",colorScheme:"light",density:"comfortable"}},_=y[Object(u.defaultTheme)()]||y.enterprise;l()(s.a.createElement(c.SplunkThemeProvider,g({},_,{__self:void 0,__source:{fileName:b,lineNumber:32,columnNumber:5}}),s.a.createElement(h,{__self:void 0,__source:{fileName:b,lineNumber:33,columnNumber:9}},s.a.createElement(d.a,{__self:void 0,__source:{fileName:b,lineNumber:34,columnNumber:13}}))))},497:function(e,t,n){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===a(e)&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=120)}({0:function(e,t){e.exports=n(1)},1:function(e,t){e.exports=n(94)},11:function(e,t){e.exports=n(125)},12:function(e,t){e.exports=n(131)},120:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return M}));var a=n(0),o=n.n(a),r=n(22),s=n.n(r),i=n(4),l=n.n(i),c=n(5),u=n.n(c),p=n(1),d=n.n(p),m=n(6),f=n.n(m),h=n(7),b=n.n(h),g=n(3),y=n.n(g),_=n(2),k=n.n(_),v=n(78),w=n.n(v),S=n(35),N=n.n(S),E=n(11),x=n.n(E),R=n(39),O=n.n(R),T=n(20),L=n.n(T),D=n(36),C=n.n(D),P=n(12),j=n(95),I=n(13),U="/builds/customer-managed-platform/rapid-diag/splunk_rapid_diag/appserver/src/packages/core-rapid-diag/src/components/reference-guide/src/ReferenceGuide.jsx";function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return b()(this,n)}}var q=function(e){f()(n,e);var t=A(n);function n(e){var a;return l()(this,n),a=t.call(this,e),k()(d()(a),"parseRapidDiagInfo",(function(e){var t={},n=[];return Object.prototype.hasOwnProperty.call(e,"error")||function e(t){return Array.isArray(t)&&t.every(e)}(e)||(e.forEach((function(e){var a=e.unavailable_utilities;n.push(e.splunk_server),Object.entries(a).forEach((function(n){var a=s()(n,2)[1];Object.entries(a).forEach((function(n){var a=s()(n,2),o=a[0],r=a[1];t[o]=t[o]||{},t[o].errors=t[o].errors||new Set,t[o].errors.add("Host '".concat(e.splunk_server,"': ").concat(r,".")),t[o].hosts=t[o].hosts||new Set,t[o].hosts.add(e.splunk_server)}))}))})),Object.entries(t).forEach((function(e){var t=s()(e,2)[1];t.available_hosts=n.filter((function(e){return!t.hosts.has(e)}))}))),t})),k()(d()(a),"refreshAvailableUtils",(function(e){a.setState({loader:!0});var t=Object(P.createRESTURL)("remote-proxy/nodes"),n=Object(P.createRESTURL)("remote-proxy/rapid_diag/info"),o=e?{force_reload:1}:{};Object(I.a)(t).then((function(e){Object(I.b)(n,e.data.nodes,o).then((function(e){var t=e.filter((function(e){return"Error"!==e.name}));a.setState({loader:!1,unavailable_utilities:a.parseRapidDiagInfo(t)})})).catch((function(e){a.setState({loader:!1}),e.response?console.error(e.response):e.request?console.error(e.request):console.log("Error",e.message)}))}))})),k()(d()(a),"renderDetails",(function(e,t){var n=[],r=[];t.errors.forEach((function(e){n.push(o.a.createElement(O.a.Item,{key:e,__self:d()(a),__source:{fileName:U,lineNumber:106,columnNumber:35}},e))})),t.available_hosts.forEach((function(e){r.push(o.a.createElement(O.a.Item,{key:e,__self:d()(a),__source:{fileName:U,lineNumber:109,columnNumber:33}},e))}));var s=r.length>0;return o.a.createElement(x.a.Row,{__self:d()(a),__source:{fileName:U,lineNumber:114,columnNumber:13}},o.a.createElement(x.a.Cell,{style:{borderTop:"none"},colSpan:2,__self:d()(a),__source:{fileName:U,lineNumber:115,columnNumber:17}},o.a.createElement(C.a,{defaultActivePanelId:"unavailable-utils",__self:d()(a),__source:{fileName:U,lineNumber:116,columnNumber:21}},o.a.createElement(C.a.Panel,{"data-test":"unavailable_panel",label:"Unavailable",panelId:"unavailable-utils",__self:d()(a),__source:{fileName:U,lineNumber:117,columnNumber:25}},o.a.createElement("div",{style:{overflowY:"auto",overflowX:"hidden",maxHeight:"240px"},__self:d()(a),__source:{fileName:U,lineNumber:122,columnNumber:29}},o.a.createElement(O.a,{"data-test":"unavailable_utils_list",__self:d()(a),__source:{fileName:U,lineNumber:129,columnNumber:33}},n))),o.a.createElement(C.a.Panel,{"data-test":"available_panel",label:"Available",panelId:"available-utils",__self:d()(a),__source:{fileName:U,lineNumber:132,columnNumber:25}},o.a.createElement("div",{style:{overflowY:"auto",overflowX:"hidden",maxHeight:"240px"},__self:d()(a),__source:{fileName:U,lineNumber:137,columnNumber:29}},s?o.a.createElement(O.a,{"data-test":"available_utils_list",__self:d()(a),__source:{fileName:U,lineNumber:145,columnNumber:37}},r):o.a.createElement("p",{"data-test":"available_warning",__self:d()(a),__source:{fileName:U,lineNumber:147,columnNumber:37}},"This utility is unavailable on all hosts."))))))})),k()(d()(a),"renderRows",(function(e){var t=[];return Object.entries(e).forEach((function(e){var n=s()(e,2),r=n[0],i=n[1];i.errors.size>0?t.push(o.a.createElement(x.a.Row,{key:r,"data-test":r,expansionRow:a.renderDetails(r,i),__self:d()(a),__source:{fileName:U,lineNumber:167,columnNumber:21}},o.a.createElement(x.a.Cell,{"data-test":"".concat(r,"-utility"),__self:d()(a),__source:{fileName:U,lineNumber:172,columnNumber:25}},r),o.a.createElement(x.a.Cell,{"data-test":"".concat(r,"-status"),__self:d()(a),__source:{fileName:U,lineNumber:173,columnNumber:25}},o.a.createElement("div",{__self:d()(a),__source:{fileName:U,lineNumber:174,columnNumber:29}},"Unavailable on ",i.errors.size," host(s).",o.a.createElement("br",{__self:d()(a),__source:{fileName:U,lineNumber:176,columnNumber:33}}),"Available on ",i.available_hosts.length," host(s).")))):t.push(o.a.createElement(x.a.Row,{key:r,"data-test":r,__self:d()(a),__source:{fileName:U,lineNumber:186,columnNumber:21}},o.a.createElement(x.a.Cell,{"data-test":"".concat(r,"-utility"),__self:d()(a),__source:{fileName:U,lineNumber:187,columnNumber:25}},r),o.a.createElement(x.a.Cell,{"data-test":"".concat(r,"-status"),__self:d()(a),__source:{fileName:U,lineNumber:188,columnNumber:25}},i.errors)))})),t})),a.state={loader:!1,unavailable_utilities:{}},a}return u()(n,[{key:"componentDidMount",value:function(){this.refreshAvailableUtils(!1)}},{key:"renderUtilityTable",value:function(e){return 0===Object.keys(e).length?o.a.createElement("p",{__self:this,__source:{fileName:U,lineNumber:200,columnNumber:20}},"No issues with utilities found"):o.a.createElement(x.a,{"data-test":"dependencies_table",stripeRows:!0,rowExpansion:"single",__self:this,__source:{fileName:U,lineNumber:203,columnNumber:13}},o.a.createElement(x.a.Head,{__self:this,__source:{fileName:U,lineNumber:204,columnNumber:17}},o.a.createElement(x.a.HeadCell,{__self:this,__source:{fileName:U,lineNumber:205,columnNumber:21}},"Utility"),o.a.createElement(x.a.HeadCell,{__self:this,__source:{fileName:U,lineNumber:206,columnNumber:21}},"Status")),o.a.createElement(x.a.Body,{__self:this,__source:{fileName:U,lineNumber:208,columnNumber:17}},this.renderRows(e)))}},{key:"render",value:function(){var e=this,t=this.state.loader,n=this.state.unavailable_utilities;return o.a.createElement(o.a.Fragment,null,o.a.createElement(w.a,{source:j.c,__self:this,__source:{fileName:U,lineNumber:218,columnNumber:17}}),o.a.createElement("div",{__self:this,__source:{fileName:U,lineNumber:219,columnNumber:17}},o.a.createElement(L.a,{"data-test":"refresh_deps_button",label:"Run Dependency Check",appearance:"secondary",onClick:function(){return e.refreshAvailableUtils(!0)},__self:this,__source:{fileName:U,lineNumber:220,columnNumber:21}}),o.a.createElement("br",{__self:this,__source:{fileName:U,lineNumber:226,columnNumber:21}}),o.a.createElement("b",{__self:this,__source:{fileName:U,lineNumber:227,columnNumber:21}},"Note:")," Results are not automatically refreshed, run again to view updated results.",t?o.a.createElement("div",{__self:this,__source:{fileName:U,lineNumber:230,columnNumber:25}},o.a.createElement(N.a,{"data-test":"dependencies_spinner",size:"medium",__self:this,__source:{fileName:U,lineNumber:231,columnNumber:29}})):this.renderUtilityTable(n)),o.a.createElement(w.a,{source:j.b,__self:this,__source:{fileName:U,lineNumber:237,columnNumber:17}}))}}]),n}(a.Component),F="/builds/customer-managed-platform/rapid-diag/splunk_rapid_diag/appserver/src/packages/core-rapid-diag/src/components/reference-guide/src/Container.jsx",M=function(){return o.a.createElement("div",{__self:void 0,__source:{fileName:F,lineNumber:5,columnNumber:5}},o.a.createElement(q,{__self:void 0,__source:{fileName:F,lineNumber:6,columnNumber:9}}))}},13:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return y}));var a=n(2),o=n.n(a),r=n(24),s=n.n(r),i=n(34),l=n(12),c=n(49),u=n.n(c),p=n(58);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var m=Object(c.makeCreateToast)(u.a),f=function(e,t){var n=Object(l.createRESTURL)(e);return Promise.resolve(s.a.get(n,{params:t,headers:{"X-Splunk-Form-Key":i.CSRFToken,"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"}})).catch((function(t){if(t.response)throw t.response;t.request?(console.error(t),function(e){m({type:p.TOAST_TYPES.ERROR,message:e,autoDismiss:!0,dismissOnActionClick:!0,showAction:!1})}("Error making request to ".concat(e))):console.log("Error",t.message)}))},h=function(e,t,n){var a=Object(l.createRESTURL)(e),o={params:n,credentials:"include",headers:{"X-Splunk-Form-Key":i.CSRFToken,"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},paramsSerializer:function(e){var t="";return Object.keys(e).forEach((function(n){t+="".concat(n,"=").concat(encodeURIComponent(e[n]),"%26")})),t.substr(0,t.length-1)}},r=t.map((function(e){return s.a.get("".concat(a,"?proxy_to=").concat(encodeURIComponent(e.proxy_to)),o)})).map((function(e){return Promise.resolve(e).then((function(e){return{status:"fulfilled",value:e}}),(function(e){return{status:"rejected",reason:e}}))}));return s.a.all(r).then((function(e){return e.map((function(e){var t;return null!=e&&e.value?null==e||null===(t=e.value)||void 0===t?void 0:t.data:null==e?void 0:e.reason.toJSON()}))})).catch((function(e){e.response?console.error(e.response):e.request?console.error(e.request):console.log("Error",e.message)}))},b=function(e,t,n,a){var r=Object(l.createRESTURL)(e),c={params:a,credentials:"include",headers:{"X-Splunk-Form-Key":i.CSRFToken,"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"}},u=t.filter((function(e){return parseFloat(e.version)<1.5}));u&&h(e,u,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({payload:encodeURIComponent(n)},a));var p=t.filter((function(e){return parseFloat(e.version)>=1.5})).map((function(e){return s.a.post("".concat(r,"?proxy_to=").concat(encodeURIComponent(e.proxy_to)),n,c)})).map((function(e){return Promise.resolve(e).then((function(e){return{status:"fulfilled",value:e}}),(function(e){return{status:"rejected",reason:e}}))}));return s.a.all(p).then((function(e){return e.map((function(e){return e.value?null==e?void 0:e.value.data:e.reason.toJSON()}))})).catch((function(e){e.response?console.error(e.response):e.request?console.error(e.request):console.log("Error",e.message)}))},g=function(e,t,n){var a=e.map((function(e){return e.matching_features=e.features&&t?e.features.filter((function(e){return t.includes(e)})).length:0,e.matching_symptoms=e.symptoms&&n?e.symptoms.filter((function(e){return n.includes(e)})).length:0,e})).filter((function(e){return e.matching_features>0||e.matching_symptoms>0}));return a.length?(a.sort((function(e,t){return e.matching_features>t.matching_features?-1:e.matching_features<t.matching_features?1:e.matching_symptoms>t.matching_symptoms?-1:e.matching_symptoms<t.matching_symptoms?1:0})),a[0].task_id):null},y=function(e){var t="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",n="(".concat(t,"[.]){3}").concat(t),a=new RegExp("^".concat(n,"$")),o="(?:[0-9a-fA-F]{1,4})",r=new RegExp("^("+"(?:".concat(o,":){7}(?:").concat(o,"|:)|")+"(?:".concat(o,":){6}(?:").concat(n,"|:").concat(o,"|:)|")+"(?:".concat(o,":){5}(?::").concat(n,"|(:").concat(o,"){1,2}|:)|")+"(?:".concat(o,":){4}(?:(:").concat(o,"){0,1}:").concat(n,"|(:").concat(o,"){1,3}|:)|")+"(?:".concat(o,":){3}(?:(:").concat(o,"){0,2}:").concat(n,"|(:").concat(o,"){1,4}|:)|")+"(?:".concat(o,":){2}(?:(:").concat(o,"){0,3}:").concat(n,"|(:").concat(o,"){1,5}|:)|")+"(?:".concat(o,":){1}(?:(:").concat(o,"){0,4}:").concat(n,"|(:").concat(o,"){1,6}|:)|")+"(?::((?::".concat(o,"){0,5}:").concat(n,"|(?::").concat(o,"){1,7}|:))")+")(%[0-9a-zA-Z]{1,})?$");return a.test(e)||r.test(e)}},2:function(e,t){e.exports=n(132)},20:function(e,t){e.exports=n(34)},22:function(e,t){e.exports=n(133)},24:function(e,t){e.exports=n(134)},3:function(e,t){e.exports=n(95)},34:function(e,t){e.exports=n(103)},35:function(e,t){e.exports=n(104)},36:function(e,t){e.exports=n(176)},39:function(e,t){e.exports=n(105)},4:function(e,t){e.exports=n(91)},49:function(e,t){e.exports=n(106)},5:function(e,t){e.exports=n(92)},58:function(e,t){e.exports=n(135)},6:function(e,t){e.exports=n(96)},7:function(e,t){e.exports=n(93)},78:function(e,t){e.exports=n(285)},95:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return i}));var a="\n# Overview\n\nThe Splunk RapidDiag app collects diagnostic data on Splunk platform deployments that run on Linux operating system for the purposes of analysis by the Splunk Support and Engineering teams.\n\nThe app provides command-line scripts and a web interface for various diagnostic data collection tasks:\n\n- Stack dumps: pstacks, eu-stacks, or procdump;\n- System call traces: strace or procmon;\n- Splunk diag;\n- Rest endpoint outputs: ( ``|rest search`` exports);\n- Network packet dumps: tcpdump or netsh;\n- I/O operations: logman or iostat;\n- Network statistics and network connections: netsh; and\n- Process information: ps, lsof, or handle64.\n\nSplunk RapidDiag also offers automatic data collection based on triggers – for example, start collecting data when certain keywords are written to a specific log file, or when systemwide memory usage crosses a threshold.\n\nSplunk RapidDiag can facilitate distributed data collection between search heads and selected peers in a distributed search environment.\n",o='\n# Usage\n\nOn the Splunk RapidDiag data collection page, you can create data collection tasks. As part of creating a task, you must specify at least a name for the task and the Splunk platform instances from which the task should collect data. The instance that runs Splunk RapidDiag must be able to search these instances, and the searched instances must also run the Splunk RapidDiag app. After you specify a task name and target instances, click "Next" to proceed to the data collector description page, which shows cards that describe the available data collectors. A collector with a red exclamation mark badge indicates that collector is not available for the task and cannot be selected. You can get more information on why the collector is not available by clicking its badge.\n\nAfter you configure a name, one or more target machines, and data collectors, finish data collection task setup by identifying the task type and what will trigger execution of the collectors that are associated with the task. A task can be *single run*, where all collectors execute once only, or *periodic*, where collectors run together for a number of times. Tasks can also have no trigger and execute immediately, or start when specific text appears in a log file.\n',r=a+"\n## Dependencies\n\nSplunk RapidDiag depends on third-party utilities for some of the data it collects. Some of these utilities vary based on the platform. You must install these utilities separately. You can install them in one of the following ways:\n\n* System-wide, by following the installation instructions for each utility\n* Into the ``splunk_rapid_diag/bin/tools`` directory within the Splunk RapidDiag app.\n\nYou can override the default app installation directory of ``$SPLUNK_HOME/etc/splunk_rapid_diag/bin/tools`` by editing ``$SPLUNK_HOME/etc/splunk_rapid_diag/default/rapid_diag.conf`` and changing the value of the ``basepath`` setting under the ``[tools]`` stanza.\n\nSee the platform-dependent sections below for specific utility installation instructions.\n\n### Dependency Checker\n\nThis section lists issues with third party utilities found in the deployment.\n",s='\n### Linux-specific utilities\n\nOn Linux operating systems, use your distribution package manager to install dependencies for Splunk RapidDiag. This document covers the ``yum`` and ``apt`` package managers, but most other package managers operate similarly.\n\n#### Stack traces\n\nSplunk RapidDiag requires the ``eu-stack`` utility, version **0.159** or above, to collect stack traces for running processes. The ``elfutils`` package provides this utility, and can be installed by running the following from a shell prompt:\n\n* ``apt install elfutils`` on Debian-based Linux deployments, or\n* ``yum install elfutils`` on RHEL-based Linux deployments.\n\nThe user under which the instance runs must be able to perform the ``ptrace`` system call. To confirm that the ``eu-stack`` utility works for this user, run the following:\n\n* ``sudo su splunk sh -c \'sleep 5 & eu-stack -p $! && echo SUCCESS || echo FAILURE\'``\n\nIf the command returns "``FAILURE``", then the user cannot currently perform ``ptrace`` system calls. Some common reasons are:\n\n1. Linux capabilities disallow it. Try explicitly whitelisting ``eu-stack`` like so:\n   * ``setcap cap_dac_override,cap_sys_ptrace+eip `which eu-stack` ``\n2. Security-Enhanced Linux (SELinux) is blocking ptrace. You can try the following to fix the problem:\n   * ``setsebool -P deny_ptrace off``\n\n#### System call traces\n\nSplunk RapidDiag requires the ``strace`` binary to run system call traces. The ``strace`` package includes this binary, and can be installed as follows:\n\n* ``apt install strace`` on Debian-based Linux deployments, or\n* ``yum install strace`` on RHEL-based Linux deployments.\n\nThe user under which the instance runs must be able to run the utility. To confirm it can, run the following:\n\n1. ``sudo su splunk``\n2. ``strace -o /dev/null sleep 0 && echo SUCCESS || echo FAILURE``\n\nIf the command returns FAILURE, follow the troubleshooting steps described earlier in this document to resolve problems with the "ptrace" system call.\n\n#### Network packet dumps\n\nThe ``tcpdump`` utility collects network packet dumps on Linux. The ``tcpdump`` package includes this utility, and can be installed as follows:\n\n* ``apt install tcpdump`` on Debian-based Linux deployments, or\n* ``yum install tcpdump`` on RHEL-based Linux deployments.\n\nThe user under which the instance runs must be able to run the utility. To confirm it can, run the following:\n\n1. ``sudo su splunk``\n2. ``tcpdump -qOc1 && echo SUCCESS || echo FAILURE``\n\nIf the command returns FAILURE, try the following commands to resolve the problem:\n\n1. ``sudo groupadd pcap``\n2. ``sudo chgrp pcap $(which tcpdump)``\n3. ``sudo chmod 750 $(which tcpdump)``\n4. ``sudo setcap cap_net_raw,cap_net_admin=eip $(which tcpdump)``\n5. ``sudo usermod -a -G pcap splunk``\n\nAfter you run these commands, try the test command again.\n\nIf the command continues to return FAILURE, it is possible that SELinux is interfering with tcpdump. In this case, change your SELinux policies to allow ``netutils_t`` permissions to splunk.\n\n#### IOPS\n\nThe ``iostat`` utility collects CPU statistics and input/output statistics for devices and partitions on Linux. The ``sysstat`` package includes this binary, and can be installed as follows:\n\n* ``sudo apt-get install sysstat -y`` on Debian-based Linux deployments, or\n* ``yum install sysstat -y`` on RHEL-based Linux deployments.\n\nThe user under which the instance runs must be able to run the utility. To confirm it can, run the following:\n\n1. ``sudo su splunk``\n2. ``iostat -x 1 10 && echo SUCCESS || echo FAILURE``\n\n#### Netstat\n\nThe ``netstat`` utility collects network connections and interface statistics on Linux. The ``net-tools`` package includes this binary, and can be installed as follows:\n\n* ``sudo apt-get install net-tools -y`` on Debian-based Linux deployments, or\n* ``yum install net-tools -y`` on RHEL-based Linux deployments.\n\nThe user under which the instance runs must be able to run the utility. To confirm it can, run the following:\n\n1. ``sudo su splunk``\n2. ``netstat -s && echo SUCCESS || echo FAILURE``\n3. ``netstat -a -n -v -e -p && echo SUCCESS || echo FAILURE``\n\n#### PS\n\nThe ``ps`` utility collects information about a selection of the active processes on Linux. The ``ps`` package includes this binary, and its built-in utility of Linux deployments:\n\nThe user under which the instance runs must be able to run the utility. To confirm it can, run the following:\n\n1. ``sudo su splunk``\n2. ``ps aux -ejL && echo SUCCESS || echo FAILURE``\n\n#### LSOF\n\nThe ``lsof`` utility collects list of opened files by processes on Linux. The ``lsof`` package includes this binary, and can be installed as follows:\n\n* ``sudo apt-get install lsof -y`` on Debian-based Linux deployments, or\n* ``yum install lsof -y`` on RHEL-based Linux deployments.\n\nThe user under which the instance runs must be able to run the utility. To confirm it can, run the following:\n\n1. ``sudo su splunk``\n2. ``lsof -s -V -n -a -K -p && echo SUCCESS || echo FAILURE``\n'+o+"\n## Data collectors\n\nEach data collector that Splunk RapidDiag offers has different disk space requirements, resource usage, and data privacy implications.\n\n### System Call Trace\nThe system call trace collector has significant disk space requirements. On a busy Splunk platform instance, the collector could consume more than 1GB per minute of disk space for data collection, and the speed on processes that the collector traces could drop by a factor that could range from 10 to 100. The collector gathers file paths, IP address, and other metadata, but no file data or network communications.\n\n### Stack Trace\nThe stack trace collector has low disk space requirements and performance impacts on machines that run Linux. Disk usage is typically in the 200KB range per run. This should let you run the collector every few hundred milliseconds without a noticeable performance hit on the instance.\n\n### Network Packet\nThe network packet collector uses disk space equivalent to the volume of data that the network transmits over the specified IP address and port. Because of that data volume, the most significant performance impact is on the file system due to disk writes. The collector gathers all information that is transmitted over the wire, including passwords and other private data. As the Splunk platform encrypts data that it transmits, and no diagnostic tools collect decryption keys, there is no security risk in using the collector.\n\n### Search Result\nThe search results collector runs a search and collects the results that the search generates. Disk usage and performance impact depend on the search and can be validated outside of the app context. The collector gathers all search result data, including any private information within the results. Review the data that the collector collects before you share it.\n\n### IOPS\nThe collector could consume more disk space depending on the collection time range. For the Linux environment, the IOPS collector has low disk space requirements. the collector gathers the CPU statistics and input/output statistics for devices and partitions.\n\n### Netstat\nThe Netstat collector has low disk space requirements and performance impact. The collector gathers the network connections both incoming and outgoing as well as network statistics over the devices.\n\n### PS\nThe PS collector has low disk space requirements and performance impact. The collector gathers information about the active processes.\n\n### LSOF\nThe LSOF collector has low disk space requirements and performance impact. The collector gathers information about the list of opened files by processes.\n\n### Splunk Diag\nSplunk diagnostic files contain technical information about the instance. Diagnostic file sizes range from 50 to 600MB and their collection can have a significant effect on the machine owing to the amount of required disk I/O. Diagnostic files do not typically include sensitive information, but passwords located in non-default areas of configuration files and other places could be retained. Review the contents of diagnostic files before you share them.\n\nSee the following page in the Splunk Documentation for information on diagnostic files: [https://docs.splunk.com/Documentation/Splunk/latest/Troubleshooting/Generateadiag](https://docs.splunk.com/Documentation/Splunk/latest/Troubleshooting/Generateadiag)\n\n## Command Line Interface\n\nYou can use the command line interface (CLI) on a Splunk Enterprise instance to run RapidDiag templates locally. To run CLI commands, you'll need host operating system access and permissions to the folder where Splunk Enterprise is installed. For more information about Splunk Enterprise and CLI, see [https://docs.splunk.com/Documentation/Splunk/latest/Admin/AbouttheCLI](About the CLI) on docs.splunk.com.\n\nTo print out help message execute: ``$ splunk cmd rapidDiag -h ``\n\n### Usage\n\n```\nusage: rapidDiag [-h] [--token_auth]\n             {templates,oneshot,collect,periodic-collect,resource-monitor,log-monitor,search-debug}\n             ...\n\nDESCRIPTION:\n\n    The Splunk RapidDiag app collects diagnostic data on Splunk platform deployments that run on Linux\n     operating system for the purposes of analysis by the Splunk Support and Engineering teams.\n\n    The app provides command-line scripts and a web interface for various diagnostic data collection tasks:\n\n    - Stack dumps: pstacks, eu-stacks, or procdump;\n    - System call traces: strace or procmon;\n    - Splunk diag;\n    - Rest endpoint outputs: ( ``|rest search`` exports); and\n    - Network packet dumps: tcpdump or netsh.\n    - I/O operations: logman or iostat;\n    - Network statistics and network connections: netsh; and\n    - Process information: ps, lsof, or handle64.\n\n    Splunk RapidDiag also offers automatic data collection based on triggers – for example, start collecting data\n    when Splunk platform processes write certain keywords to a specific log file, or when system-wide memory usage crosses a threshold.\n\n    Please inspect available COMMANDS for further details.\n\n    NOTE: All collections are executed on local machine only.\n\n\noptional arguments:\n  -h, --help            show this help message and exit\n  --token_auth, -t      Prompt for authentication token rather than\n                        username/password, if needed.\n\nRAPID-DIAG COMMANDS:\n  {templates,oneshot,collect,periodic-collect,resource-monitor,log-monitor,search-debug,upload}\n    templates           Execute action on templates.\n    oneshot             Execute action on one-shot, ad-hoc data collection\n                        tasks. Example: splunk cmd rapidDiag oneshot run <template path>\n    collect             Run a specific collector.\n    periodic-collect    Run a specific collector periodically.\n    resource-monitor    Run a specific collector if a defined resource threshold is exceeded.\n    log-monitor         Run a collector if there's a regex match in a specified log file.\n                        The log file has to be accessible by the splunkd service.\n                        Example: splunk cmd rapidDiag log-monitor \"ERR\" pstack log-file=splunkd.log\n    search-debug        Run a collector when an SPL search is matched using a regular expression.\n                        Use a unique string value in the search for the regex match.\n    upload              Upload the collection output file to Splunk Support at splunk.com\n\n```\n\n### Subcommands\n\nEach command (from the listed above) has subcommands - please check the CLI help for particular command, for example:\n``$ splunk cmd rapidDiag templates -h``\n\n### Limitations\n\nCurrently CLI can execute tasks only on local machine - which means distribution to search peers will not be done.\n\n# Troubleshooting\n\nWhen Splunk RapidDiag does not behave properly, check its log file at ``$SPLUNK_HOME/var/log/splunk/splunk_rapid_diag.log`` for details. You can increase the log file detail by setting ``log_level=DEBUG`` under the ``[logging]`` stanza in ``$SPLUNK_RAPID_DIAG/etc/apps/splunk_rapid_diag/local/rapid_diag.conf``.\n## Permission Denied Issue:\n\n1. Check the directory owner and permission.\n2. App requires the read and write permission.\n3. Try running below command to resove the issue:\n\n``sudo chmod -R a-w $SPLUNK_HOME/etc/apps/splunk_rapid_diag``\n\n# Version Compatibility\n\n## Splunk Version\n\n- 8.1.X+ (Python 3 only)\n\n## Linux: Utilities Compatibility\n\n|                     |  Ubuntu  |  CentOs  |  openSUSE  |\n| ------------------- | -------- | -------- | ---------- |\n|Distribution version |  16.04+  |  6.1+    |   15.1+    |\n|Kernel version       |  4.4.0+  |  2.6.32+ |   4.12.14+ |\n|Strace               |  4.11+   |  4.8+    |   4.2+     |\n|eu-stack             |  0.165+  |  0.164+  |   0.168+   |\n|tcpdump              |  4.7.4+  |  4.1+    |   4.9.2+   |\n|IOPS                 |  11.2.0+ |  9.0.4+  |   12.0.2+  |\n|netstat              |  1.42+   |  1.42+   |   2.1+     |\n|lsof                 |  4.89+   |  4.82+   |   4.91+    |\n|ps                   | In-built | In-built |  In-built  |\n\n# \n",i=a+o}})}});