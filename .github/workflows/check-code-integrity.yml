# This workflow calls to `reusable-dev-environment` workflow to run do unit tests

name: Check - Code integrity

on:
  workflow_dispatch:
    inputs:
      reference:
        required: true
        type: string
        default: master
        description: Branch/Tag/Commit SHA reference for the source code.
  pull_request:
    branches:
      - 'main'
      - 'master'
      - '*.*-*.*'
      - '*.*-*.*-wzd'

jobs:
  check-code-integrity:
    uses: ./.github/workflows/reusable-dev-environment.yml
    with:
      reference: ${{ github.event.inputs.reference || github.ref }}
      command: '(find node_modules/.bin/eslint && yarn lint || "../../node_modules/.bin/eslint" .)'
    secrets: inherit
